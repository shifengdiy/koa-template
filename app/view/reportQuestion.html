<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" href="./css/common.css">
  <link rel="stylesheet" href="./vendor/vue/element.css">
  <link rel="stylesheet" href="./css/reportQuestion.css">
  <script src="./vendor/vue/vue.js"></script>
  <script src="./vendor/vue/element.js"></script>
  <script src="./vendor/jquery/jquery.js"></script>
  <title>故障上报</title>
</head>
<body>
  <div class="app-page">
    <div class="title">故障上报</div>
    <el-form :model="ruleForm" :rules="rules" ref="ruleForm" label-width="100px" label-position="top" class="demo-ruleForm">
      <el-form-item label="设施名称" prop="name">
        <el-input v-model="ruleForm.name"></el-input>
      </el-form-item>
 
      <el-form-item label="是否需要回访" prop="isReact">
        <el-switch v-model="ruleForm.isReact"></el-switch>
      </el-form-item>
      <template v-if="ruleForm.isReact">
        <el-form-item label="姓名" prop="reporterName">
          <el-input v-model="ruleForm.reporterName"></el-input>
        </el-form-item>
        <el-form-item label="电话" prop="reporterPhone">
          <el-input v-model="ruleForm.reporterPhone"></el-input>
        </el-form-item>
      </template>
      <el-form-item label="故障内容" prop="reportContent">
        <el-input type="textarea" :autosize="{minRows: 4}" v-model="ruleForm.reportContent"></el-input>
      </el-form-item>
      <el-form-item class="operate-panel">
        <el-button type="primary" @click="submitForm('ruleForm')">立即提交</el-button>
        <el-button @click="resetForm('ruleForm')">重置</el-button>
      </el-form-item>
    </el-form>
  </div>

<script>
  var reportQuestionEl = new Vue({
    el: '.app-page',
    name: 'reportQuestionEl',
    data: {
      ruleForm: {
        name: '', 
        isReact: false,
        reportContent: ''
      },
      rules: {
        name: [
          { required: true, message: '请输入设施名称', trigger: 'blur' },
          { min: 3, message: '字符长度不少于三个', trigger: 'blur' }
        ],
        reporterName: [
          { required: true, message: '请填写联系人姓名', trigger: 'blur' }
        ],
        reporterPhone: [
          { required: true, message: '请填写联系人电话', trigger: 'blur' },
          { len: 11, message: '请填写正确手机号', trigger: 'blur' }
        ],
        date1: [
          { type: 'date', required: true, message: '请选择日期', trigger: 'change' }
        ],
        date2: [
          { type: 'date', required: true, message: '请选择时间', trigger: 'change' }
        ],
        type: [
          { type: 'array', required: true, message: '请至少选择一个活动性质', trigger: 'change' }
        ],
        resource: [
          { required: true, message: '请选择活动资源', trigger: 'change' }
        ],
        reportContent: [
          { required: true, message: '请填写故障内容', trigger: 'blur' },
          { min: 10, max: 400, message: '内容长度在10到400之间', trigger: 'blur' }
        ]
      }
    },
    methods: {
      submitForm(formName) {
        this.$refs[formName].validate((valid) => {
          if (valid) {
            alert('submit!');
          } else {
            alert('信息填写不正确');
            return false;
          }
        });
      },
      resetForm(formName) {
        this.$refs[formName].resetFields();
      }
    },
  })
</script>
</body>
</html>